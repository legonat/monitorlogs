(this["webpackJsonpreact-login-signup-ui-template"]=this["webpackJsonpreact-login-signup-ui-template"]||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),s=a.n(o),l=a(31),c=(a(86),a(6)),i=(a(87),a(88),a(12)),p=a(26),u=a(16),d=a.n(u),g=a(7),h=a(8),m=a(10),f=a(9);function v(e){return"white"===e.color?(console.log(e.color),r.a.createElement("div",{className:"spinner-white"},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}))):"blue"===e.color?(console.log(e.color),r.a.createElement("div",{className:"spinner-blue"},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}))):void 0}var b=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.submitted?r.a.createElement("div",null,r.a.createElement(v,{color:"white"})):r.a.createElement("div",{className:"auth-wrapper"},r.a.createElement("div",{className:"auth-inner"},r.a.createElement("form",null,r.a.createElement("h3",null,"HSM Wallet Logs Access"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{name:"user",type:"text",className:"form-control",placeholder:"Enter username",value:this.props.user,onChange:this.props.handleUsernameInput})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{name:"pass",type:"password",className:"form-control",placeholder:"Enter password",value:this.props.pass,onChange:this.props.handlePassInput})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Remember me"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:this.props.handleLoginSubmit},"Submit"),r.a.createElement("p",{className:"forgot-password text-right"},"Not registered yet? ",r.a.createElement("a",{href:"/#/registration"},"Sign up"))))))}}]),a}(n.Component),E=new p.a,C=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return void 0!==E.get("rtoken")?r.a.createElement(i.a,{to:"/"}):r.a.createElement(b,{user:this.props.user,pass:this.props.pass,handleUsernameInput:this.props.handleUsernameInput,handlePassInput:this.props.handlePassInput,handleLoginSubmit:this.props.handleLoginSubmit,submitted:this.props.submitted,isAuthenticated:this.props.isAuthenticated})}}]),a}(r.a.Component),S=new p.a,j=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).handleRender=function(e){return void 0===S.get("rtoken")?r.a.createElement(i.a,{to:"/"}):r.a.createElement(v,null)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.handleLogoutSubmit()}},{key:"render",value:function(){return r.a.createElement("div",null,this.handleRender())}}]),a}(n.Component),O=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-wrapper"},r.a.createElement("div",{className:"auth-inner"},r.a.createElement("form",null,r.a.createElement("h3",null," Registration "),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Username "),r.a.createElement("input",{name:"user",type:"text",className:"form-control",placeholder:"Enter username",value:this.props.user,onChange:this.props.handleUsernameInput})),r.a.createElement("div",{className:"form-group"}," ",this.props.passwordMatch?r.a.createElement("label",null," Password "):r.a.createElement("label",{id:"passMatch"},"Passwords do not match"),r.a.createElement("input",{name:"pass",type:"password",className:"form-control",placeholder:"Enter password",value:this.props.pass,onChange:this.props.handlePassInput,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{name:"confirmPass",type:"password",className:"form-control",placeholder:"Confirm password",value:this.props.confirmPass,onChange:this.props.handleConfirmPassInput,required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",onClick:this.props.handleRegisterSubmit,disabled:!this.props.passwordMatch},"Register "),r.a.createElement("p",{className:"forgot-password text-right"},"Already registered ? ",r.a.createElement("a",{href:"/#/login"}," Sign in ")))))}}]),a}(n.Component),k=a(67),P=a(79),y=a(123),w=a(118),L=a(69),I=a(125),N=a(121),T=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).buildTabsRow=function(){console.log("building nav tabs");var t=[];return e.props.tabsArray.forEach((function(a,n){t.push(r.a.createElement(k.a,{onClick:function(){return e.props.onTabClick(n)}},r.a.createElement(P.a,{eventKey:a},a)))})),t},e.buildTabsContent=function(){console.log("building tabs content");var t=[],a=e.props.contents;return e.props.tabsArray.forEach((function(e,n){t.push(r.a.createElement(y.a.Pane,{eventKey:e},a[n]))})),t},e.buildSessionsDropdown=function(){if(void 0===e.props.sessions)return null;var t="Select session";return""!==e.props.sessionsDropdownValue&&(t=e.props.sessionsDropdownValue),console.log("building dropdown"),r.a.createElement(k.a,{className:"ml-auto"},r.a.createElement(A,{handleSelectChange:e.props.handleSelectSessionChange,data:e.props.sessions,value:t}))},e.buildFilenamesDropdown=function(){if(void 0===e.props.filenames)return null;var t="Select Log Name";return""!==e.props.logsDropdownValue&&(t=e.props.logsDropdownValue),console.log("building dropdown"),r.a.createElement(k.a,null,r.a.createElement(x,{handleSelectChange:e.props.handleSelectFilenameChange,data:e.props.filenames,value:t}))},e}return Object(h.a)(a,[{key:"render",value:function(){return console.log(this.props.currentTab),console.log(this.props.tabsArray[this.props.currentTab]),r.a.createElement("div",null,r.a.createElement(y.a.Container,{id:"tabs-with-dropdown",defaultActiveKey:this.props.tabsArray[this.props.currentTab]},r.a.createElement(w.a,{className:"clearfix"},r.a.createElement(L.a,{sm:12},r.a.createElement(I.a,{variant:"tabs",defaultActiveKey:this.props.tabsArray[this.props.currentTab]},this.buildTabsRow(),this.buildFilenamesDropdown(),this.buildSessionsDropdown())),r.a.createElement(L.a,{sm:12},r.a.createElement(y.a.Content,{animation:!0},this.buildTabsContent())))))}}]),a}(n.Component),A=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=[];return this.props.data.forEach((function(t){var a,n=t.value;a=t.id,e.push(r.a.createElement(N.a.Item,{eventKey:a,"data-key":a},a+".    "+n))})),r.a.createElement(N.a,{as:k.a,onSelect:this.props.handleSelectChange},r.a.createElement(N.a.Toggle,{as:P.a},this.props.value),r.a.createElement(N.a.Menu,null,e))}}]),a}(n.Component),x=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=[];return this.props.data.forEach((function(t){var a,n=t.value;a=t.id,e.push(r.a.createElement(N.a.Item,{eventKey:a,"data-key":a},n))})),r.a.createElement(N.a,{as:k.a,onSelect:this.props.handleSelectChange},r.a.createElement(N.a.Toggle,{as:P.a},this.props.value),r.a.createElement(N.a.Menu,null,e))}}]),a}(n.Component),F=a(119),D=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handlePageClick=function(t){if("SPAN"!==t.target.nodeName){var a=parseInt(t.target.text);e.props.handlePageChange(a)}},e.handleFirstPageClick=function(){e.props.handlePageChange(1)},e.handleLastPageClick=function(){e.props.handlePageChange(e.props.pageCount)},e.handleForwardClick=function(){if(e.props.pageCount>e.props.currentPage){var t=e.props.currentPage+1;e.props.handlePageChange(t)}},e.handleBackwardsClick=function(){if(e.props.currentPage>1){var t=e.props.currentPage-1;e.props.handlePageChange(t)}},e.handleFastForwardClick=function(){if(e.props.pageCount-e.props.currentPage>5){var t=e.props.currentPage+5;e.props.handlePageChange(t)}},e.handleFastBackwardsClick=function(){if(e.props.currentPage>6){var t=e.props.currentPage-6;e.props.handlePageChange(t)}},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.pageCount,t=this.props.currentPage,a=0,n=0;switch(!0){case e<25:a=25,n=12;break;case e>25&&t<90:a=18,n=9;break;case e>25&&t<990:a=14,n=7;break;case t>1e3:a=12,n=6;break;default:a=12,n=6}for(var o=1,s=[],l=1;l<=a&&(t>n&&1===l&&e>25&&(s.push(r.a.createElement(F.a.Ellipsis,{onClick:this.handleFastBackwardsClick})),o=t-n+1),console.log("Default"),s.push(r.a.createElement(F.a.Item,{key:o,active:o===t,onClick:this.handlePageClick},o)),o++,e-t>n&&l===a&&s.push(r.a.createElement(F.a.Ellipsis,{onClick:this.handleFastForwardClick})),!(o>e));l++);return r.a.createElement("div",null,r.a.createElement(F.a,{currentPage:this.props.currentPage,total:this.props.pageCount},r.a.createElement(F.a.First,{onClick:this.handleFirstPageClick}),r.a.createElement(F.a.Prev,{onClick:this.handleBackwardsClick}),s,r.a.createElement(F.a.Next,{onClick:this.handleForwardClick}),r.a.createElement(F.a.Last,{onClick:this.handleLastPageClick})))}}]),a}(n.Component),R=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).checkAuth=function(t){var a=r.a.createElement(v,{color:"white"});return void 0!==e.props.filenames[0]&&(console.log("Rendering Filterable Table"),a=r.a.createElement("div",{className:"board-inner"},r.a.createElement(B,{logs:e.props.logs,errors:e.props.errors,handleSelectSessionChange:e.props.handleSelectSessionChange,handleSelectFilenameChange:e.props.handleSelectFilenameChange,handleLogsPageChange:e.props.handleLogsPageChange,handleErrorsPageChange:e.props.handleErrorsPageChange,handleSearchPageChange:e.props.handleSearchPageChange,currentLogsPage:e.props.currentLogsPage,currentErrorsPage:e.props.currentErrorsPage,currentSearchPage:e.props.currentSearchPage,sessions:e.props.sessions,logsDropdownValue:e.props.logsDropdownValue,sessionsDropdownValue:e.props.sessionsDropdownValue,filterText:e.props.filterText,filterService:e.props.filterService,filteredLogs:e.props.filteredLogs,filteredErrors:e.props.filteredErrors,filteredSearch:e.props.filteredSearch,loading:e.props.loading,errorsPageCount:e.props.errorsPageCount,logsPageCount:e.props.logsPageCount,itemsPerPage:e.props.itemsPerPage,currentTab:e.props.currentTab,handleTabClick:e.props.handleTabClick,searchResults:e.props.searchResults,searchPageCount:e.props.searchPageCount,handleLinkClick:e.props.handleLinkClick,logId:e.props.logId,searchedPage:e.props.searchedPage,filenames:e.props.filenames}))),r.a.createElement("div",null,a)},e}return Object(h.a)(a,[{key:"render",value:function(){return console.log("Rendering Board"),this.checkAuth()}}]),a}(n.Component),B=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).tabsArray=["Logs","Errors"],n.firstTab="Logs",n.secondTab="Errors",n.toggleAnimation=function(){if(!0===n.props.loading)return r.a.createElement(v,{color:"blue"});var e=[];return console.log("passing content into tabs"),e.push(r.a.createElement("div",null,r.a.createElement(D,{currentPage:n.props.currentLogsPage,pageCount:n.props.logsPageCount,handlePageChange:n.props.handleLogsPageChange}),r.a.createElement(V,{names:M,logs:n.props.logs,itemsPerPage:n.props.itemsPerPage,currentPage:n.props.currentLogsPage,filterText:n.props.filterText,filterService:n.props.filterService,filteredLogs:n.props.filteredLogs,handleLinkClick:n.props.handleLinkClick,logId:n.props.logId}),r.a.createElement(D,{currentPage:n.props.currentLogsPage,pageCount:n.props.logsPageCount,handlePageChange:n.props.handleLogsPageChange}))),e.push(r.a.createElement("div",null,r.a.createElement(D,{currentPage:n.props.currentErrorsPage,pageCount:n.props.errorsPageCount,handlePageChange:n.props.handleErrorsPageChange}),r.a.createElement(V,{names:M,logs:n.props.errors,itemsPerPage:n.props.itemsPerPage,currentPage:n.props.currentErrorsPage,filterText:n.props.filterText,filterService:n.props.filterService,filteredLogs:n.props.filteredErrors,handleLinkClick:n.props.handleLinkClick,logId:n.props.logId}),r.a.createElement(D,{currentPage:n.props.currentErrorsPage,pageCount:n.props.errorsPageCount,handlePageChange:n.props.handleErrorsPageChange}))),void 0!==n.props.searchResults&&0!==n.props.searchResults.length?(console.log("Searching..."),console.log(n.props.searchResults),r.a.createElement("div",null,r.a.createElement(D,{currentPage:n.props.currentSearchPage,pageCount:n.props.searchPageCount,handlePageChange:n.props.handleSearchPageChange}),r.a.createElement(V,{names:M,logs:n.props.searchResults,itemsPerPage:n.props.itemsPerPage,currentPage:n.props.currentSearchPage,filterText:n.props.filterText,filterService:n.props.filterService,filteredSearch:n.props.filteredSearch,handleLinkClick:n.props.handleLinkClick,logId:n.props.logId}),r.a.createElement(D,{currentPage:n.props.currentSearchPage,pageCount:n.props.searchPageCount,handlePageChange:n.props.handleSearchPageChange}))):(console.log("building NAVTABS"),r.a.createElement(T,{tabsArray:n.tabsArray,handleSelectSessionChange:n.props.handleSelectSessionChange,handleSelectFilenameChange:n.props.handleSelectFilenameChange,sessions:n.props.sessions,filenames:n.props.filenames,logsDropdownValue:n.props.logsDropdownValue,sessionsDropdownValue:n.props.sessionsDropdownValue,contents:e,onTabClick:n.props.handleTabClick,currentTab:n.props.currentTab}))},n}return Object(h.a)(a,[{key:"render",value:function(){return this.toggleAnimation()}}]),a}(n.Component),V=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.props.filterText,a=this.props.filterService,n=[],o=this.props.itemsPerPage,s=this.props.currentPage,l=s*o,c=(s-1)*o;""===t&&""===a&&this.props.logs.slice(c,l).forEach((function(t){n.push(r.a.createElement(U,{handleLinkClick:e.props.handleLinkClick,logId:e.props.logId,log:t,key:t.id}))}));void 0!==this.props.filteredLogs&&this.props.filteredLogs.slice(c,l).forEach((function(t){n.push(r.a.createElement(U,{logId:e.props.logId,handleLinkClick:e.props.handleLinkClick,log:t,key:t.id}))}));void 0!==this.props.filteredSearch&&this.props.filteredSearch.slice(c,l).forEach((function(t){n.push(r.a.createElement(U,{logId:e.props.logId,handleLinkClick:e.props.handleLinkClick,log:t,key:t.id}))}));return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",{id:"datecol"},"Date"),r.a.createElement("td",{id:"servcol"},"Service"),r.a.createElement("td",{id:"desccol"},"Desription"))),r.a.createElement("tbody",null,n))}}]),a}(n.Component),U=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).scrollRef=r.a.createRef(),n}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.log,t=e.id,a=e.date,n=e.service,o=e.description,s="http://localhost:5000/v2/private/getLogById?id="+t;return e.id===this.props.logId?(console.log("Found log"),r.a.createElement("tr",{className:"selectedRow",ref:function(e){e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},r.a.createElement("td",{id:"datecol"},r.a.createElement("a",{href:s,onClick:this.props.handleLinkClick,"data-log-id":t},a)),r.a.createElement("td",{id:"servcol"},n),r.a.createElement("td",{id:"desccol"},o))):r.a.createElement("tr",null,r.a.createElement("td",{id:"datecol"},r.a.createElement("a",{href:s,onClick:this.props.handleLinkClick,"data-log-id":t,className:"table-link"},a)),r.a.createElement("td",{id:"servcol"},n),r.a.createElement("td",{id:"desccol"},o))}}]),a}(n.Component),G=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t=this.props.session,a=t.dates;return e=t.id,r.a.createElement("option",{"data-key":e},e+".    "+a)}}]),a}(n.Component),M=(n.Component,{id:0,date:"Date",service:"Source",description:"Description"}),z=a(124),K=a(122),q=a(120),W=a(75),H=a(74),J=a(40),$=a(39),Q=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(ne.Consumer,null,(function(t){return t.isAuthenticated?r.a.createElement(z.a,{bg:"primary",variant:"dark",sticky:"top",expand:"lg",className:"navbar"},r.a.createElement(I.a,{className:"col mr-4 justify-content-start"},r.a.createElement(z.a.Brand,{href:"/"},"HSM Logs")),r.a.createElement(z.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(z.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(I.a,{className:"col-auto justify-content-space-between"},r.a.createElement(K.a,{className:"search-bar"},r.a.createElement(q.a,{className:"nav-group"},r.a.createElement(W.a,{onChange:e.props.handleSearchInput,value:e.props.searchText,type:"text",placeholder:"Search All",className:"nav-form"}),r.a.createElement(q.a.Append,null,r.a.createElement(H.a,{variant:"outline-secondary",onClick:e.props.handleSearchInput,type:"button",className:"nav-btn-middle"},r.a.createElement($.a,{icon:J.b})),r.a.createElement(H.a,{onClick:e.props.handleSearchSubmit,variant:"outline-secondary",className:"nav-btn",type:"submit"},"Search"))))),r.a.createElement(I.a,{classname:"col-auto justify-content-space-between"},r.a.createElement(K.a,{className:"nav-filter"},r.a.createElement(W.a,{onChange:e.props.handleFilterTextInput,value:e.props.filterText,type:"text",placeholder:"Filter...",className:"nav-form col-auto"}))),r.a.createElement(I.a,{classname:"col-8 justify-content-space-between"},r.a.createElement(K.a,{className:"nav-dropdown"},r.a.createElement(q.a,null,r.a.createElement(Y,{services:e.props.services,value:e.props.value,handleSelectServiceChange:e.props.handleSelectServiceChange,class:"dropdown"}),r.a.createElement(q.a.Append,null,r.a.createElement(H.a,{variant:"outline-secondary",onClick:e.props.handleSelectServiceChange,className:"nav-btn-middle"},r.a.createElement($.a,{icon:J.b})))))),r.a.createElement(I.a,{className:"col justify-content-end"},r.a.createElement(I.a.Link,{href:"/#/logout"},"Logout")))):r.a.createElement("div",null)}))}}]),a}(n.Component),X=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.service,t=e.service;e.id;return r.a.createElement("option",null,t)}}]),a}(n.Component),Y=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=[];return this.props.services.forEach((function(t){e.push(r.a.createElement(X,{service:t,id:t.id}))})),r.a.createElement(W.a,{as:"select",value:this.props.value,onChange:this.props.handleSelectServiceChange},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Filter services..."),e)}}]),a}(n.Component),Z=a(78),_=new p.a,ee=function(e){var t=e.component,a=e.data,o=Object(Z.a)(e,["component","data"]),s=function(e){Object(m.a)(s,e);var n=Object(f.a)(s);function s(){var e;Object(g.a)(this,s);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(e=n.call.apply(n,[this].concat(l))).handleRender=function(n){return void 0===_.get("rToken")?r.a.createElement(i.a,{to:"/login"}):r.a.createElement(t,Object.assign({isAuthenticated:e.props.isAuthenticated},a,n))},e}return Object(h.a)(s,[{key:"render",value:function(){return r.a.createElement(i.b,Object.assign({},o,{render:this.handleRender}))}}]),s}(n.Component);return r.a.createElement(ne.Consumer,null,(function(e){return r.a.createElement(s,{isAuthenticated:e.isAuthenticated})}))},te=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(){return Object(g.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})};return r.a.createElement(ne.Consumer,null,(function(t){return t.isAuthenticated?r.a.createElement(H.a,{variant:"outline-light",onClick:e,className:"nav-to-top-btn"},r.a.createElement($.a,{icon:J.a,size:"2x"})):r.a.createElement("div",null)}))}}]),a}(n.Component),ae=new p.a,ne=r.a.createContext();function re(){var e=Object(i.g)(),t=(ae.get("rToken"),Object(n.useState)("")),a=Object(c.a)(t,2),o=a[0],s=a[1],p=Object(n.useState)(""),u=Object(c.a)(p,2),g=u[0],h=u[1],m=Object(n.useState)([]),f=Object(c.a)(m,2),v=f[0],b=f[1],E=Object(n.useState)([]),S=Object(c.a)(E,2),k=S[0],P=S[1],y=Object(n.useState)([]),w=Object(c.a)(y,2),L=w[0],I=w[1],N=Object(n.useState)(""),T=Object(c.a)(N,2),A=T[0],x=T[1],F=Object(n.useState)(!0),D=Object(c.a)(F,2),B=D[0],V=D[1],U=Object(n.useState)(""),G=Object(c.a)(U,2),M=G[0],z=G[1],K=Object(n.useState)(!1),q=Object(c.a)(K,2),W=q[0],H=q[1],J=Object(n.useState)(!1),$=Object(c.a)(J,2),X=$[0],Y=$[1],Z=Object(n.useState)(""),_=Object(c.a)(Z,2),re=_[0],oe=_[1],se=Object(n.useState)(0),le=Object(c.a)(se,2),ce=le[0],ie=le[1],pe=Object(n.useState)(""),ue=Object(c.a)(pe,2),de=ue[0],ge=ue[1],he=Object(n.useState)([]),me=Object(c.a)(he,2),fe=me[0],ve=me[1],be=Object(n.useState)([]),Ee=Object(c.a)(be,2),Ce=Ee[0],Se=Ee[1],je=Object(n.useState)([]),Oe=Object(c.a)(je,2),ke=Oe[0],Pe=Oe[1],ye=Object(n.useState)(""),we=Object(c.a)(ye,2),Le=we[0],Ie=we[1],Ne=Object(n.useState)(""),Te=Object(c.a)(Ne,2),Ae=Te[0],xe=Te[1],Fe=Object(n.useState)(""),De=Object(c.a)(Fe,2),Re=De[0],Be=De[1],Ve=Object(n.useState)([]),Ue=Object(c.a)(Ve,2),Ge=Ue[0],Me=Ue[1],ze=Object(n.useState)([]),Ke=Object(c.a)(ze,2),qe=Ke[0],We=Ke[1],He=Object(n.useState)([]),Je=Object(c.a)(He,2),$e=Je[0],Qe=Je[1],Xe=Object(n.useState)(!1),Ye=Object(c.a)(Xe,2),Ze=Ye[0],_e=Ye[1],et=Object(n.useState)(0),tt=Object(c.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)(0),ot=Object(c.a)(rt,2),st=ot[0],lt=ot[1],ct=Object(n.useState)(0),it=Object(c.a)(ct,2),pt=it[0],ut=it[1],dt=Object(n.useState)(0),gt=Object(c.a)(dt,2),ht=gt[0],mt=gt[1],ft=Object(n.useState)(0),vt=Object(c.a)(ft,2),bt=vt[0],Et=vt[1],Ct=Object(n.useState)(0),St=Object(c.a)(Ct,2),jt=St[0],Ot=St[1],kt=Object(n.useState)(0),Pt=Object(c.a)(kt,2),yt=Pt[0],wt=Pt[1],Lt=Object(n.useState)(1),It=Object(c.a)(Lt,2),Nt=It[0],Tt=It[1],At=Object(n.useState)(1),xt=Object(c.a)(At,2),Ft=xt[0],Dt=xt[1],Rt=Object(n.useState)(1),Bt=Object(c.a)(Rt,2),Vt=Bt[0],Ut=Bt[1],Gt=function(e){s(e.target.value)},Mt=function(e){var t=e.target.value;h(t),V(t===A)},zt=function(e){var t=e.target.value;x(t),V(t===g)};function Kt(){Tt(1),Dt(1),Ut(1),Ot(0)}function qt(e){var t;return console.log("Total Logs count "+e),t=(e-e%200)/200+1,console.log("Total Pages Count "+t),t}function Wt(){H(!0);var t={login:o,password:g,fingerprint:"kvueijn37472sd2"};d.a.post("http://localhost:5000/v2/loginAttempt",t).then((function(t){console.log(t.response),console.log("LoginSuccess"),console.log(t.data),ae.set("rToken",t.data.refreshToken,{path:"/"}),e.replace("/"),e.go(0)})).catch((function(t){if(console.log("Catching error"),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);console.log(t.response),alert(t.response.status+": "+t.response.data.error),e.replace("/"),e.go(0)}))}function Ht(){H(!0);d.a.get("http://localhost:5000/v2/logoutAttempt").then((function(t){console.log(t.response),console.log("LogoutSuccess"),console.log(t.data),ae.remove("rToken",{path:"/"}),e.replace("/"),e.go(0)})).catch((function(t){if(console.log("Catching error"),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);console.log(t.response),alert(t.response.status+": "+t.response.data.error),e.replace("/"),e.go(0)}))}function Jt(){if(console.log(Le),""!==Le){H(!0),_e(!0);var t=-1;if(void 0!==v[0]&&(t=v[0].sessionId),yt===t)return console.log("Searching in the SAME session"),void console.log(t);var a={sessionId:ce,filename:Le},n={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/getLogsBySession",a,n).then((function(e){console.log("GetLogsBySessionSuccess"),console.log(e.data);var t=e.data.errors,a=e.data.logs,n=a.length,r=t.length;lt(qt(n)),ut(qt(r)),b(a),P(t),_e(!1),H(!1)})).catch((function(t){return console.log("Catching error"),void 0===t.response?(alert(t),e.replace("/"),void e.go(0)):401===t.response.status?(oe(""),e.replace("/"),void e.go(0)):(console.log(t.response),alert(t.response.status+": "+t.response.data.error),e.replace("/"),void e.go(0))}))}else console.log("No filename selected")}var $t=function(t){var a=g,n=A;(t.preventDefault(),a!==n)?V(!1):(V(!0),function(t){d.a.post("http://localhost:5000/v2/registrationAttempt",t).then((function(t){console.log(t.response),console.log("RegisterSuccess"),console.log(t.data),e.push("/"),e.go(0)})).catch((function(t){if(console.log("Catching error"),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);console.log(t.response),alert(t.response.status+": "+t.response.data.error)}))}({login:o,password:g,fingerprint:"kvueijn37472sd2"}))};return Object(n.useEffect)((function(){0!==jt&&(Tt(jt),console.log("Set searched Page: "+jt))}),[jt]),Object(n.useEffect)((function(){var e=localStorage.getItem("lastSelectedFilename"),t=sessionStorage.getItem("lastSelectedSessionId");t=parseInt(t),console.log("Selected SessionID is:"),console.log(t),console.log(e),null===e&&(e=""),isNaN(t)&&(t=0),Ie(e),ie(t)}),[]),Object(n.useEffect)((function(){var t=ae.get("rToken");""===re&&void 0!==t&&(console.log("AuthAttempt"),function(){H(!0);var t={fingerprint:"kvueijn37472sd2"};d.a.post("http://localhost:5000/v2/authAttempt",t).then((function(e){console.log(e),console.log("AuthSuccess"),oe(e.data.accessToken),H(!1),Y(!0),ae.set("rToken",e.data.refreshToken,{path:"/"})})).catch((function(t){if(console.log("Catching error"),console.log(t.response),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);alert(t.response.status+": "+t.response.data.error),403===t.response.status&&ae.remove("rToken")}))}())}),[re]),Object(n.useEffect)((function(){""!==re&&(console.log("Getting Logs Filenames"),function(){H(!0);var t={headers:{Authorization:"Bearer ".concat(re)}};d.a.get("http://localhost:5000/v2/private/getLogsFilenames",t).then((function(e){console.log("GetLogsFilenamesSuccess"),console.log(e.data),Pe(e.data.results),H(!1)})).catch((function(t){return console.log("Catching error"),void 0===t.response?(alert(t),e.replace("/"),void e.go(0)):401===t.response.status?(oe(""),e.replace("/"),void e.go(0)):(console.log(t.response),void alert(t.response.status+": "+t.response.data.error))}))}())}),[re]),Object(n.useEffect)((function(){""!==re&&0!==ce&&(console.log("GettingLogs"),Jt())}),[ce,re]),Object(n.useEffect)((function(){""!==re&&0!==bt&&(console.log("GettingLogsBySearchRequest"),Jt())}),[bt,re]),Object(n.useEffect)((function(){""!==re&&""!==Le&&(console.log("GettingLogsSessions"),localStorage.setItem("lastSelectedFilename",Le),sessionStorage.removeItem("lastSelectedSessionId"),Kt(),function(){if(console.log(Le),""!==Le){H(!0);var t={value:Le},a={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/getLogsSessions",t,a).then((function(e){console.log("GetLogSessionsSuccess"),console.log(e.data);var t=e.data.sessions,a=t[t.length-1].id;0===ce&&ie(a),ve(t),H(!1)})).catch((function(t){return console.log("Catching error"),void 0===t.response?(alert(t),e.replace("/"),void e.go(0)):401===t.response.status?(oe(""),e.replace("/"),void e.go(0)):(console.log(t.response),void alert(t.response.status+": "+t.response.data.error))}))}}())}),[Le,re]),Object(n.useEffect)((function(){""!==re&&""!==Le&&(console.log("GettingLogsServices"),function(){if(""!==Le){H(!0);var t={value:Le},a={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/getLogsServiceInfo",t,a).then((function(e){console.log("GetLogServiceInfoSuccess"),console.log(e.data),Se(e.data.services),H(!1)})).catch((function(t){return console.log("Catching error"),void 0===t.response?(alert(t),e.replace("/"),void e.go(0)):401===t.response.status?(oe(""),e.replace("/"),void e.go(0)):(console.log(t.response),void alert(t.response.status+": "+t.response.data.error))}))}}())}),[Le,re]),Object(n.useEffect)((function(){void 0!==fe[0]&&0!==ce&&(console.log("Setting Session Name"),ge(fe[ce-1].value))}),[fe,ce]),Object(n.useEffect)((function(){0!==yt&&sessionStorage.setItem("lastSelectedSessionId",yt)}),[yt]),Object(n.useEffect)((function(){0!==ce&&sessionStorage.setItem("lastSelectedSessionId",ce)}),[ce]),Object(n.useEffect)((function(){if(console.log("Try getting search page"),console.log(v),console.log(yt),void 0!==v[0]&&0!==bt){if(v[0].sessionId!==yt)return;console.log("Getting Search Page"),function(e){if(console.log("Calculating slice: "+e),e<=0)return _e(!1),void H(!1);var t=(e-e%200)/200+1;console.log("Calculated page: "+t),Ot(t),_e(!1),H(!1)}(v.slice(0,bt-v[0].id).length)}}),[bt,v[0]]),Object(n.useEffect)((function(){if(""!==Re||""!==Ae){var e=[];v.forEach((function(t){var a=t.date,n=t.description.toLowerCase();a!==Re&&-1===n.indexOf(Re)||-1===t.service.indexOf(Ae)||e.push(t)}));var t=[];k.forEach((function(e){var a=e.date,n=e.description.toLowerCase();a!==Re&&-1===n.indexOf(Re)||-1===e.service.indexOf(Ae)||t.push(e)}));var a=[];L.forEach((function(e){var t=e.date,n=e.description.toLowerCase();t!==Re&&-1===n.indexOf(Re)||-1===e.service.indexOf(Ae)||a.push(e)}));var n=e.length,r=t.length,o=a.length;lt(qt(n)),ut(qt(r)),mt(qt(o)),Me(e),We(t),Qe(a),console.log("filter complete")}}),[Re,Ae,v,k,L]),r.a.createElement(l.b,{history:e},r.a.createElement("div",{className:"App"},r.a.createElement(ne.Provider,{value:{isAuthenticated:X}},r.a.createElement(Q,{searchText:M,handleSearchInput:function(e){if("INPUT"!==e.target.nodeName)return Et(0),I([]),wt(0),void z("");z(e.target.value)},handleSearchSubmit:function(t){H(!0),_e(!0),t.preventDefault();var a={text:M,filename:Le},n={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/findLogs",a,n).then((function(e){console.log("SearchSuccess"),console.log(e.data.logs);var t=e.data.logs,a=t.length;mt(qt(a)),I(t),H(!1),_e(!1)})).catch((function(t){if(console.log("Catching error"),console.log(t.response),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);alert(t.response.status+": "+t.response.data.error),403===t.response.status&&ae.remove("rToken")}))},handleUnblockSubmit:function(){var t={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/unblock/",{login:"test5"},t).then((function(e){console.log(e.response),console.log("UnblockSuccess"),alert("User is successfuly unblocked"),console.log(e.data)})).catch((function(t){if(console.log("Catching error"),void 0===t.response)return alert(t),e.replace("/"),void e.go(0);console.log(t.response),alert(t.response.status+": "+t.response.data.error)}))},handleFilterTextInput:function(e){Be(e.target.value),""===e.target.value&&(lt(qt(v.length)),ut(qt(k.length)),mt(qt(L.length)))},filterText:Re,handleSelectServiceChange:function(e){if("SELECT"!==e.target.nodeName)return xe(""),lt(qt(v.length)),ut(qt(k.length)),mt(qt(L.length)),void console.log(e.target.nodeName);console.log(e.target),xe(e.target.value)},services:Ce,value:Ae}),r.a.createElement(te,null),r.a.createElement(i.d,null,r.a.createElement(ee,{exact:!0,path:"/",data:{logs:v,errors:k,searchResults:L,submitted:W,logsDropdownValue:Le,filteredLogs:Ge,filteredErrors:qe,filteredSearch:$e,filenames:ke,sessions:fe,sessionsDropdownValue:de,filterText:Re,filterService:Ae,loading:Ze,logsPageCount:st,errorsPageCount:pt,searchPageCount:ht,currentTab:at,itemsPerPage:200,logId:bt,searchedPage:jt,currentLogsPage:Nt,currentErrorsPage:Ft,currentSearchPage:Vt,handleLogsPageChange:function(e){console.log("Setting State Logs Page"),Tt(e)},handleErrorsPageChange:function(e){console.log("Setting State Errors Page"),Dt(e)},handleSearchPageChange:function(e){console.log("Setting State Search Page"),Ut(e)},handleSelectSessionChange:function(e){console.log("selected session "+e);var t=parseInt(e);b([]),Kt(),ie(t)},handleSelectFilenameChange:function(e){console.log("selected logfileId"+e);var t=parseInt(e),a=ke[t-1].value;console.log("Selected Filename"+a),ve([]),Ie(a),ge(""),ie(0)},handleTabClick:function(e){nt(e)},handleLinkClick:function(t){t.preventDefault(),H(!0),_e(!0);var a=t.target.dataset.logId;console.log(t.target),console.log(a),a=parseInt(a);var n={id:a,value:Le},r={headers:{Authorization:"Bearer ".concat(re)}};d.a.post("http://localhost:5000/v2/private/getLogById",n,r).then((function(e){var t=e.data.log.id,a=e.data.log.sessionId;console.log("GetLogSuccess"),console.log(e.data.log.id),console.log(a),wt(a),ie(a),I([]),Et(t),nt(0)})).catch((function(t){return console.log("Catching error"),void 0===t.response?(alert(t),e.replace("/"),void e.go(0)):401===t.response.status?(oe(""),e.replace("/"),void e.go(0)):(console.log(t.response),void alert(t.response.status+": "+t.response.data.error))}))}},component:R}),r.a.createElement(i.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(C,{user:o,pass:g,handleUsernameInput:Gt,handlePassInput:Mt,handleLoginSubmit:Wt,submitted:W,isAuthenticated:X})}}),r.a.createElement(i.b,{exact:!0,path:"/logout",render:function(){return r.a.createElement(j,{handleLogoutSubmit:Ht,submitted:W,isAuthenticated:X})}}),r.a.createElement(i.b,{exact:!0,path:"/registration",render:function(){return r.a.createElement(O,{user:o,pass:g,confirmPass:A,passwordMatch:B,handleUsernameInput:Gt,handlePassInput:Mt,handleConfirmPassInput:zt,handleRegisterSubmit:$t})}})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(l.a,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(113)},86:function(e,t,a){},88:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.f7818f88.chunk.js.map